(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{3053:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/exams/[id]/results",function(){return n(8209)}])},1666:function(e,t,n){"use strict";var r=n(5893);n(7294);t.Z=function(e){var t=e.children,n=e.variant,a=void 0===n?"primary":n,s=e.size,i=void 0===s?"md":s,o=e.disabled,l=void 0!==o&&o,c=e.loading,d=void 0!==c&&c,u=e.fullWidth,m=void 0!==u&&u,x=e.onClick,h=e.type,f=void 0===h?"button":h,g=e.className,v=void 0===g?"":g,b=m?"w-full":"",p=l||d?"opacity-50 cursor-not-allowed":"cursor-pointer",y="".concat("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-cyan-600 text-white hover:bg-cyan-700 focus:ring-cyan-500"}[a]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[i]," ").concat(b," ").concat(p," ").concat(v);return(0,r.jsxs)("button",{type:f,className:y,onClick:x,disabled:l||d,children:[d&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},3549:function(e,t,n){"use strict";var r=n(5893);n(7294);t.Z=function(e){var t=e.label,n=e.type,a=void 0===n?"text":n,s=e.placeholder,i=e.value,o=e.onChange,l=e.error,c=e.disabled,d=void 0!==c&&c,u=e.required,m=void 0!==u&&u,x=e.fullWidth,h=void 0!==x&&x,f=e.className,g=void 0===f?"":f,v=e.name,b=e.id,p=l?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300",y=d?"bg-gray-100 cursor-not-allowed":"bg-white",j=h?"w-full":"",w="".concat("block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"," ").concat(p," ").concat(y," ").concat(j," ").concat(g);return(0,r.jsxs)("div",{className:h?"w-full":"",children:[t&&(0,r.jsxs)("label",{htmlFor:b||v,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,m&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsx)("input",{type:a,id:b||v,name:v,value:i,onChange:function(e){return o(e.target.value)},placeholder:s,disabled:d,required:m,className:w}),l&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]})}},9081:function(e,t,n){"use strict";var r=n(5893),a=n(7294);t.Z=function(e){var t=e.isOpen,n=e.onClose,s=e.title,i=e.children,o=e.size,l=void 0===o?"md":o,c=e.showCloseButton,d=void 0===c||c;if((0,a.useEffect)((function(){var e=function(e){"Escape"===e.key&&n()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),function(){document.removeEventListener("keydown",e),document.body.style.overflow="unset"}}),[t,n]),!t)return null;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l]," sm:w-full"),children:[(s||d)&&(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex justify-between items-center",children:[s&&(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s}),d&&(0,r.jsxs)("button",{onClick:n,className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,r.jsx)("div",{className:"px-4 py-5 sm:p-6",children:i})]})]})})}},3029:function(e,t,n){"use strict";var r=n(5893);n(7294);t.Z=function(e){var t=e.label,n=e.options,a=e.value,s=e.onChange,i=e.placeholder,o=e.error,l=e.disabled,c=void 0!==l&&l,d=e.required,u=void 0!==d&&d,m=e.fullWidth,x=void 0!==m&&m,h=e.className,f=void 0===h?"":h,g=e.name,v=e.id,b=o?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300",p=c?"bg-gray-100 cursor-not-allowed":"bg-white",y=x?"w-full":"",j="".concat("block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"," ").concat(b," ").concat(p," ").concat(y," ").concat(f);return(0,r.jsxs)("div",{className:x?"w-full":"",children:[t&&(0,r.jsxs)("label",{htmlFor:v||g,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,u&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsxs)("select",{id:v||g,name:g,value:a,onChange:function(e){return s(e.target.value)},disabled:c,required:u,className:j,children:[i&&(0,r.jsx)("option",{value:"",disabled:!0,children:i}),n.map((function(e){return(0,r.jsx)("option",{value:e.value,children:e.label},e.value)}))]}),o&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o})]})}},5159:function(e,t,n){"use strict";var r=n(9815),a=n(5893);n(7294);t.Z=function(e){var t=e.data,n=e.columns,s=e.onRowClick,i=e.loading,o=void 0!==i&&i,l=e.emptyMessage,c=void 0===l?"No data available":l,d=e.className,u=void 0===d?"":d;return o?(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"bg-gray-200 h-12"}),(0,r.Z)(Array(5)).map((function(e,t){return(0,a.jsx)("div",{className:"bg-gray-100 h-16 border-t"},t)}))]})}):0===t.length?(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No data"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:c})]})}):(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsx)("tr",{children:n.map((function(e){return(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.header},e.key)}))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e,t){return(0,a.jsx)("tr",{onClick:function(){return null===s||void 0===s?void 0:s(e)},className:s?"cursor-pointer hover:bg-gray-50":"",children:n.map((function(t){return(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e):e[t.key]||"-"},t.key)}))},t)}))})]})})})}},8209:function(e,t,n){"use strict";n.r(t);var r=n(7568),a=n(1799),s=n(9396),i=n(828),o=n(7582),l=n(5893),c=n(7294),d=n(1163),u=n(8469),m=n(1666),x=n(9081),h=n(5159),f=n(3549),g=n(3029);t.default=function(){var e=(0,d.useRouter)(),t=e.query.id,n=parseInt(t),v=(0,c.useState)(null),b=v[0],p=v[1],y=(0,c.useState)([]),j=y[0],w=y[1],N=(0,c.useState)([]),k=N[0],C=N[1],Z=(0,c.useState)(!0),M=Z[0],E=Z[1],_=(0,c.useState)(!1),I=_[0],A=_[1],S=(0,c.useState)(null),R=S[0],B=S[1],T=(0,c.useState)({studentId:"",obtainedMarks:"",grade:"",remarks:""}),W=T[0],z=T[1];(0,c.useEffect)((function(){n&&L()}),[n]);var L=function(){var e=(0,r.Z)((function(){var e,t,r,a,s;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),E(!0),[4,Promise.all([u.T6.getById(n),u.T6.getResults(n),u.t7.getAll()])];case 1:return e=i.Z.apply(void 0,[o.sent(),3]),t=e[0],r=e[1],a=e[2],p(t.data),w(r.data),C(a.data),[3,4];case 2:return s=o.sent(),console.error("Error fetching data:",s),[3,4];case 3:return E(!1),[7];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)((function(e){var t,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:e.preventDefault(),i.label=1;case 1:return i.trys.push([1,6,,7]),t=(0,s.Z)((0,a.Z)({},W),{studentId:parseInt(W.studentId),obtainedMarks:parseInt(W.obtainedMarks)}),R?[4,u.T6.update(n,t)]:[3,3];case 2:return i.sent(),[3,5];case 3:return[4,u.T6.addResult(n,t)];case 4:i.sent(),i.label=5;case 5:return A(!1),B(null),O(),L(),[3,7];case 6:return r=i.sent(),console.error("Error saving result:",r),[3,7];case 7:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.Z)((function(e){return(0,o.__generator)(this,(function(e){if(confirm("Are you sure you want to delete this result?"))try{L()}catch(t){console.error("Error deleting result:",t)}return[2]}))}));return function(t){return e.apply(this,arguments)}}(),O=function(){z({studentId:"",obtainedMarks:"",grade:"",remarks:""})},F=[{key:"studentId",header:"Student",render:function(e){var t=k.find((function(t){return t.id===e.studentId}));return t?"".concat(t.firstName," ").concat(t.lastName):"-"}},{key:"obtainedMarks",header:"Obtained Marks"},{key:"grade",header:"Grade",render:function(e){var t=e.grade||function(e,t){var n=e/t*100;return n>=90?"A+":n>=80?"A":n>=70?"B+":n>=60?"B":n>=50?"C+":n>=40?"C":"F"}(e.obtainedMarks,(null===b||void 0===b?void 0:b.totalMarks)||100);return(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("A+"===t||"A"===t?"bg-green-100 text-green-800":"B+"===t||"B"===t?"bg-blue-100 text-blue-800":"C+"===t||"C"===t?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t})}},{key:"remarks",header:"Remarks"},{key:"actions",header:"Actions",render:function(e){return(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(m.Z,{size:"sm",variant:"secondary",onClick:function(){return function(e){B(e),z({studentId:e.studentId.toString(),obtainedMarks:e.obtainedMarks.toString(),grade:e.grade||"",remarks:e.remarks||""}),A(!0)}(e)},children:"Edit"}),(0,l.jsx)(m.Z,{size:"sm",variant:"danger",onClick:function(){return D(e)},children:"Delete"})]})}}];return M?(0,l.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,l.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):b?(0,l.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)(m.Z,{variant:"secondary",onClick:function(){return e.back()},className:"mb-4",children:"\u2190 Back to Exams"}),(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:b.name}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Date:"})," ",new Date(b.examDate).toLocaleDateString()]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Time:"})," ",b.startTime," - ",b.endTime]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Total Marks:"})," ",b.totalMarks]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Exam Results"}),(0,l.jsx)(m.Z,{onClick:function(){return A(!0)},children:"Add Result"})]}),(0,l.jsx)(h.Z,{data:j,columns:F,loading:M,emptyMessage:"No results found for this exam"}),(0,l.jsx)(x.Z,{isOpen:I,onClose:function(){A(!1),B(null),O()},title:R?"Edit Result":"Add Result",size:"md",children:(0,l.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,l.jsx)(g.Z,{label:"Student",options:k.map((function(e){return{value:e.id,label:"".concat(e.firstName," ").concat(e.lastName," (").concat(e.studentId,")")}})),value:W.studentId,onChange:function(e){return z((0,s.Z)((0,a.Z)({},W),{studentId:e}))},placeholder:"Select student",required:!0,fullWidth:!0}),(0,l.jsx)(f.Z,{label:"Obtained Marks",type:"number",value:W.obtainedMarks,onChange:function(e){return z((0,s.Z)((0,a.Z)({},W),{obtainedMarks:e}))},required:!0,fullWidth:!0}),(0,l.jsx)(f.Z,{label:"Grade",value:W.grade,onChange:function(e){return z((0,s.Z)((0,a.Z)({},W),{grade:e}))},placeholder:"Auto-calculated if left empty",fullWidth:!0}),(0,l.jsx)(f.Z,{label:"Remarks",value:W.remarks,onChange:function(e){return z((0,s.Z)((0,a.Z)({},W),{remarks:e}))},fullWidth:!0}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,l.jsx)(m.Z,{type:"button",variant:"secondary",onClick:function(){A(!1),B(null),O()},children:"Cancel"}),(0,l.jsx)(m.Z,{type:"submit",variant:"primary",children:R?"Update Result":"Add Result"})]})]})})]}):(0,l.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Exam not found"}),(0,l.jsx)(m.Z,{onClick:function(){return e.back()},children:"Go Back"})]})})}},1163:function(e,t,n){e.exports=n(387)},828:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3375);var a=n(1566);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||(0,r.Z)(e,t)||(0,a.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[774,888,179],(function(){return t=3053,e(e.s=t);var t}));var t=e.O();_N_E=t}]);