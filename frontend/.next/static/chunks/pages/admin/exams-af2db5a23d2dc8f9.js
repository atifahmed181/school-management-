(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[249],{7841:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/exams",function(){return n(3766)}])},1666:function(e,t,n){"use strict";var r=n(5893);n(7294);t.Z=function(e){var t=e.children,n=e.variant,a=void 0===n?"primary":n,s=e.size,i=void 0===s?"md":s,l=e.disabled,o=void 0!==l&&l,c=e.loading,d=void 0!==c&&c,u=e.fullWidth,m=void 0!==u&&u,x=e.onClick,h=e.type,f=void 0===h?"button":h,p=e.className,g=void 0===p?"":p,v=m?"w-full":"",b=o||d?"opacity-50 cursor-not-allowed":"cursor-pointer",y="".concat("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-cyan-600 text-white hover:bg-cyan-700 focus:ring-cyan-500"}[a]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[i]," ").concat(v," ").concat(b," ").concat(g);return(0,r.jsxs)("button",{type:f,className:y,onClick:x,disabled:o||d,children:[d&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},3549:function(e,t,n){"use strict";var r=n(5893);n(7294);t.Z=function(e){var t=e.label,n=e.type,a=void 0===n?"text":n,s=e.placeholder,i=e.value,l=e.onChange,o=e.error,c=e.disabled,d=void 0!==c&&c,u=e.required,m=void 0!==u&&u,x=e.fullWidth,h=void 0!==x&&x,f=e.className,p=void 0===f?"":f,g=e.name,v=e.id,b=o?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300",y=d?"bg-gray-100 cursor-not-allowed":"bg-white",j=h?"w-full":"",w="".concat("block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"," ").concat(b," ").concat(y," ").concat(j," ").concat(p);return(0,r.jsxs)("div",{className:h?"w-full":"",children:[t&&(0,r.jsxs)("label",{htmlFor:v||g,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,m&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsx)("input",{type:a,id:v||g,name:g,value:i,onChange:function(e){return l(e.target.value)},placeholder:s,disabled:d,required:m,className:w}),o&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o})]})}},9081:function(e,t,n){"use strict";var r=n(5893),a=n(7294);t.Z=function(e){var t=e.isOpen,n=e.onClose,s=e.title,i=e.children,l=e.size,o=void 0===l?"md":l,c=e.showCloseButton,d=void 0===c||c;if((0,a.useEffect)((function(){var e=function(e){"Escape"===e.key&&n()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),function(){document.removeEventListener("keydown",e),document.body.style.overflow="unset"}}),[t,n]),!t)return null;return(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n}),(0,r.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[o]," sm:w-full"),children:[(s||d)&&(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 flex justify-between items-center",children:[s&&(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s}),d&&(0,r.jsxs)("button",{onClick:n,className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),(0,r.jsx)("div",{className:"px-4 py-5 sm:p-6",children:i})]})]})})}},3029:function(e,t,n){"use strict";var r=n(5893);n(7294);t.Z=function(e){var t=e.label,n=e.options,a=e.value,s=e.onChange,i=e.placeholder,l=e.error,o=e.disabled,c=void 0!==o&&o,d=e.required,u=void 0!==d&&d,m=e.fullWidth,x=void 0!==m&&m,h=e.className,f=void 0===h?"":h,p=e.name,g=e.id,v=l?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300",b=c?"bg-gray-100 cursor-not-allowed":"bg-white",y=x?"w-full":"",j="".concat("block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"," ").concat(v," ").concat(b," ").concat(y," ").concat(f);return(0,r.jsxs)("div",{className:x?"w-full":"",children:[t&&(0,r.jsxs)("label",{htmlFor:g||p,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,u&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsxs)("select",{id:g||p,name:p,value:a,onChange:function(e){return s(e.target.value)},disabled:c,required:u,className:j,children:[i&&(0,r.jsx)("option",{value:"",disabled:!0,children:i}),n.map((function(e){return(0,r.jsx)("option",{value:e.value,children:e.label},e.value)}))]}),l&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l})]})}},5159:function(e,t,n){"use strict";var r=n(9815),a=n(5893);n(7294);t.Z=function(e){var t=e.data,n=e.columns,s=e.onRowClick,i=e.loading,l=void 0!==i&&i,o=e.emptyMessage,c=void 0===o?"No data available":o,d=e.className,u=void 0===d?"":d;return l?(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"bg-gray-200 h-12"}),(0,r.Z)(Array(5)).map((function(e,t){return(0,a.jsx)("div",{className:"bg-gray-100 h-16 border-t"},t)}))]})}):0===t.length?(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No data"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:c})]})}):(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsx)("tr",{children:n.map((function(e){return(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.header},e.key)}))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e,t){return(0,a.jsx)("tr",{onClick:function(){return null===s||void 0===s?void 0:s(e)},className:s?"cursor-pointer hover:bg-gray-50":"",children:n.map((function(t){return(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e):e[t.key]||"-"},t.key)}))},t)}))})]})})})}},3766:function(e,t,n){"use strict";n.r(t);var r=n(7568),a=n(1799),s=n(9396),i=n(828),l=n(7582),o=n(5893),c=n(7294),d=n(1163),u=n(8469),m=n(1666),x=n(9081),h=n(5159),f=n(3549),p=n(3029);t.default=function(){var e=(0,d.useRouter)(),t=(0,c.useState)([]),n=t[0],g=t[1],v=(0,c.useState)([]),b=v[0],y=v[1],j=(0,c.useState)([]),w=j[0],k=j[1],N=(0,c.useState)(!0),Z=N[0],C=N[1],T=(0,c.useState)(!1),E=T[0],M=T[1],I=(0,c.useState)(null),S=I[0],_=I[1],W=(0,c.useState)({name:"",subjectId:"",classId:"",examDate:"",startTime:"",endTime:"",totalMarks:"",passingMarks:"",examType:"",description:""}),q=W[0],z=W[1];(0,c.useEffect)((function(){A()}),[]);var A=function(){var e=(0,r.Z)((function(){var e,t,n,r,a;return(0,l.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),C(!0),[4,Promise.all([u.T6.getAll(),u.Ix.getAll(),u.Ft.getAll()])];case 1:return e=i.Z.apply(void 0,[s.sent(),3]),t=e[0],n=e[1],r=e[2],g(t.data),y(n.data),k(r.data),[3,4];case 2:return a=s.sent(),console.error("Error fetching data:",a),[3,4];case 3:return C(!1),[7];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.Z)((function(e){var t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:e.preventDefault(),r.label=1;case 1:return r.trys.push([1,6,,7]),t=(0,s.Z)((0,a.Z)({},q),{subjectId:parseInt(q.subjectId),classId:parseInt(q.classId),totalMarks:parseInt(q.totalMarks),passingMarks:parseInt(q.passingMarks)}),S?[4,u.T6.update(S.id,t)]:[3,3];case 2:return r.sent(),[3,5];case 3:return[4,u.T6.create(t)];case 4:r.sent(),r.label=5;case 5:return M(!1),_(null),B(),A(),[3,7];case 6:return n=r.sent(),console.error("Error saving exam:",n),[3,7];case 7:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,r.Z)((function(e){var t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:if(!confirm("Are you sure you want to delete this exam?"))return[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,u.T6.delete(e.id)];case 2:return n.sent(),A(),[3,4];case 3:return t=n.sent(),console.error("Error deleting exam:",t),[3,4];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),B=function(){z({name:"",subjectId:"",classId:"",examDate:"",startTime:"",endTime:"",totalMarks:"",passingMarks:"",examType:"",description:""})},F=[{key:"name",header:"Exam Name"},{key:"subjectId",header:"Subject",render:function(e){var t=b.find((function(t){return t.id===e.subjectId}));return(null===t||void 0===t?void 0:t.name)||"-"}},{key:"classId",header:"Class",render:function(e){var t=w.find((function(t){return t.id===e.classId}));return(null===t||void 0===t?void 0:t.name)||"-"}},{key:"examDate",header:"Date"},{key:"startTime",header:"Start Time"},{key:"endTime",header:"End Time"},{key:"totalMarks",header:"Total Marks"},{key:"examType",header:"Type"},{key:"actions",header:"Actions",render:function(t){return(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsx)(m.Z,{size:"sm",variant:"primary",onClick:function(){return e.push("/admin/exams/".concat(t.id,"/results"))},children:"Results"}),(0,o.jsx)(m.Z,{size:"sm",variant:"secondary",onClick:function(){return function(e){_(e),z({name:e.name,subjectId:e.subjectId.toString(),classId:e.classId.toString(),examDate:e.examDate,startTime:e.startTime,endTime:e.endTime,totalMarks:e.totalMarks.toString(),passingMarks:e.passingMarks.toString(),examType:e.examType,description:e.description||""}),M(!0)}(t)},children:"Edit"}),(0,o.jsx)(m.Z,{size:"sm",variant:"danger",onClick:function(){return L(t)},children:"Delete"})]})}}];return(0,o.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Exam Management"}),(0,o.jsx)(m.Z,{onClick:function(){return M(!0)},children:"Add New Exam"})]}),(0,o.jsx)(h.Z,{data:n,columns:F,loading:Z,emptyMessage:"No exams found"}),(0,o.jsx)(x.Z,{isOpen:E,onClose:function(){M(!1),_(null),B()},title:S?"Edit Exam":"Add New Exam",size:"lg",children:(0,o.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsx)(f.Z,{label:"Exam Name",value:q.name,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{name:e}))},required:!0,fullWidth:!0}),(0,o.jsx)(p.Z,{label:"Subject",options:b.map((function(e){return{value:e.id,label:e.name}})),value:q.subjectId,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{subjectId:e}))},placeholder:"Select subject",required:!0,fullWidth:!0}),(0,o.jsx)(p.Z,{label:"Class",options:w.map((function(e){return{value:e.id,label:e.name}})),value:q.classId,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{classId:e}))},placeholder:"Select class",required:!0,fullWidth:!0}),(0,o.jsx)(f.Z,{label:"Exam Date",type:"date",value:q.examDate,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{examDate:e}))},required:!0,fullWidth:!0}),(0,o.jsx)(f.Z,{label:"Start Time",type:"time",value:q.startTime,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{startTime:e}))},required:!0,fullWidth:!0}),(0,o.jsx)(f.Z,{label:"End Time",type:"time",value:q.endTime,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{endTime:e}))},required:!0,fullWidth:!0}),(0,o.jsx)(f.Z,{label:"Total Marks",type:"number",value:q.totalMarks,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{totalMarks:e}))},required:!0,fullWidth:!0}),(0,o.jsx)(f.Z,{label:"Passing Marks",type:"number",value:q.passingMarks,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{passingMarks:e}))},required:!0,fullWidth:!0}),(0,o.jsx)(p.Z,{label:"Exam Type",options:[{value:"mid_term",label:"Mid Term"},{value:"final",label:"Final"},{value:"quiz",label:"Quiz"},{value:"assignment",label:"Assignment"}],value:q.examType,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{examType:e}))},placeholder:"Select exam type",required:!0,fullWidth:!0})]}),(0,o.jsx)(f.Z,{label:"Description",value:q.description,onChange:function(e){return z((0,s.Z)((0,a.Z)({},q),{description:e}))},fullWidth:!0}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,o.jsx)(m.Z,{type:"button",variant:"secondary",onClick:function(){M(!1),_(null),B()},children:"Cancel"}),(0,o.jsx)(m.Z,{type:"submit",variant:"primary",children:S?"Update Exam":"Create Exam"})]})]})})]})}},1163:function(e,t,n){e.exports=n(387)},828:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(3375);var a=n(1566);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||(0,r.Z)(e,t)||(0,a.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[774,888,179],(function(){return t=7841,e(e.s=t);var t}));var t=e.O();_N_E=t}]);