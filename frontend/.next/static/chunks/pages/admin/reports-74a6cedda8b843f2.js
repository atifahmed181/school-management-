(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[133],{2967:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/reports",function(){return a(4946)}])},1666:function(e,t,a){"use strict";var r=a(5893);a(7294);t.Z=function(e){var t=e.children,a=e.variant,s=void 0===a?"primary":a,n=e.size,l=void 0===n?"md":n,d=e.disabled,c=void 0!==d&&d,i=e.loading,o=void 0!==i&&i,u=e.fullWidth,m=void 0!==u&&u,x=e.onClick,h=e.type,g=void 0===h?"button":h,y=e.className,v=void 0===y?"":y,p=m?"w-full":"",f=c||o?"opacity-50 cursor-not-allowed":"cursor-pointer",b="".concat("inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",info:"bg-cyan-600 text-white hover:bg-cyan-700 focus:ring-cyan-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[l]," ").concat(p," ").concat(f," ").concat(v);return(0,r.jsxs)("button",{type:g,className:b,onClick:x,disabled:c||o,children:[o&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t]})}},3549:function(e,t,a){"use strict";var r=a(5893);a(7294);t.Z=function(e){var t=e.label,a=e.type,s=void 0===a?"text":a,n=e.placeholder,l=e.value,d=e.onChange,c=e.error,i=e.disabled,o=void 0!==i&&i,u=e.required,m=void 0!==u&&u,x=e.fullWidth,h=void 0!==x&&x,g=e.className,y=void 0===g?"":g,v=e.name,p=e.id,f=c?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300",b=o?"bg-gray-100 cursor-not-allowed":"bg-white",N=h?"w-full":"",j="".concat("block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"," ").concat(f," ").concat(b," ").concat(N," ").concat(y);return(0,r.jsxs)("div",{className:h?"w-full":"",children:[t&&(0,r.jsxs)("label",{htmlFor:p||v,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,m&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsx)("input",{type:s,id:p||v,name:v,value:l,onChange:function(e){return d(e.target.value)},placeholder:n,disabled:o,required:m,className:j}),c&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:c})]})}},3029:function(e,t,a){"use strict";var r=a(5893);a(7294);t.Z=function(e){var t=e.label,a=e.options,s=e.value,n=e.onChange,l=e.placeholder,d=e.error,c=e.disabled,i=void 0!==c&&c,o=e.required,u=void 0!==o&&o,m=e.fullWidth,x=void 0!==m&&m,h=e.className,g=void 0===h?"":h,y=e.name,v=e.id,p=d?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300",f=i?"bg-gray-100 cursor-not-allowed":"bg-white",b=x?"w-full":"",N="".concat("block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"," ").concat(p," ").concat(f," ").concat(b," ").concat(g);return(0,r.jsxs)("div",{className:x?"w-full":"",children:[t&&(0,r.jsxs)("label",{htmlFor:v||y,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,u&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,r.jsxs)("select",{id:v||y,name:y,value:s,onChange:function(e){return n(e.target.value)},disabled:i,required:u,className:N,children:[l&&(0,r.jsx)("option",{value:"",disabled:!0,children:l}),a.map((function(e){return(0,r.jsx)("option",{value:e.value,children:e.label},e.value)}))]}),d&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:d})]})}},5159:function(e,t,a){"use strict";var r=a(9815),s=a(5893);a(7294);t.Z=function(e){var t=e.data,a=e.columns,n=e.onRowClick,l=e.loading,d=void 0!==l&&l,c=e.emptyMessage,i=void 0===c?"No data available":c,o=e.className,u=void 0===o?"":o;return d?(0,s.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"bg-gray-200 h-12"}),(0,r.Z)(Array(5)).map((function(e,t){return(0,s.jsx)("div",{className:"bg-gray-100 h-16 border-t"},t)}))]})}):0===t.length?(0,s.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No data"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:i})]})}):(0,s.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden ".concat(u),children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsx)("tr",{children:a.map((function(e){return(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.header},e.key)}))})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e,t){return(0,s.jsx)("tr",{onClick:function(){return null===n||void 0===n?void 0:n(e)},className:n?"cursor-pointer hover:bg-gray-50":"",children:a.map((function(t){return(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e):e[t.key]||"-"},t.key)}))},t)}))})]})})})}},4946:function(e,t,a){"use strict";a.r(t);var r=a(7568),s=a(1799),n=a(9396),l=a(828),d=a(7582),c=a(5893),i=a(7294),o=a(8469),u=a(1666),m=a(5159),x=a(3029),h=a(3549);t.default=function(){var e,t=(0,i.useState)("students"),a=t[0],g=t[1],y=(0,i.useState)(!1),v=y[0],p=y[1],f=(0,i.useState)([]),b=f[0],N=f[1],j=(0,i.useState)([]),w=j[0],k=j[1],Z=(0,i.useState)(null),C=Z[0],D=Z[1],A=(0,i.useState)({classId:"",studentId:"",startDate:"",endDate:""}),I=A[0],R=A[1];(0,i.useEffect)((function(){F()}),[]);var F=function(){var e=(0,r.Z)((function(){var e,t,a,r;return(0,d.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,Promise.all([o.Ft.getAll(),o.t7.getAll()])];case 1:return e=l.Z.apply(void 0,[s.sent(),2]),t=e[0],a=e[1],N(t.data),k(a.data),[3,3];case 2:return r=s.sent(),console.error("Error fetching filter data:",r),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)((function(){var e,t;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:switch(r.trys.push([0,11,12,13]),p(!0),a){case"students":return[3,1];case"attendance":return[3,3];case"academic":return[3,5];case"financial":return[3,7]}return[3,9];case 1:return[4,o.Vo.getStudents(I)];case 2:case 4:case 6:case 8:return e=r.sent(),[3,10];case 3:return[4,o.Vo.getAttendance(I)];case 5:return[4,o.Vo.getAcademic(I)];case 7:return[4,o.Vo.getFinancial(I)];case 9:case 13:return[2];case 10:return D(e.data),[3,13];case 11:return t=r.sent(),console.error("Error generating report:",t),[3,13];case 12:return p(!1),[7]}}))}));return function(){return e.apply(this,arguments)}}(),_=[{id:"students",label:"Student Reports",icon:"\ud83d\udc68\u200d\ud83c\udf93"},{id:"attendance",label:"Attendance Reports",icon:"\ud83d\udcdd"},{id:"academic",label:"Academic Reports",icon:"\ud83d\udcda"},{id:"financial",label:"Financial Reports",icon:"\ud83d\udcb0"}];return(0,c.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reports"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Generate and view comprehensive reports for your school."})]}),(0,c.jsx)("div",{className:"mb-6",children:(0,c.jsx)("div",{className:"border-b border-gray-200",children:(0,c.jsx)("nav",{className:"-mb-px flex space-x-8",children:_.map((function(e){return(0,c.jsxs)("button",{onClick:function(){return g(e.id)},className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(a===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,c.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id)}))})})}),(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Report Filters"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,c.jsx)(x.Z,{label:"Class",options:b.map((function(e){return{value:e.id,label:e.name}})),value:I.classId,onChange:function(e){return R((0,n.Z)((0,s.Z)({},I),{classId:e}))},placeholder:"All Classes"}),(0,c.jsx)(x.Z,{label:"Student",options:w.map((function(e){return{value:e.id,label:"".concat(e.firstName," ").concat(e.lastName)}})),value:I.studentId,onChange:function(e){return R((0,n.Z)((0,s.Z)({},I),{studentId:e}))},placeholder:"All Students"}),(0,c.jsx)(h.Z,{label:"Start Date",type:"date",value:I.startDate,onChange:function(e){return R((0,n.Z)((0,s.Z)({},I),{startDate:e}))}}),(0,c.jsx)(h.Z,{label:"End Date",type:"date",value:I.endDate,onChange:function(e){return R((0,n.Z)((0,s.Z)({},I),{endDate:e}))}})]}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,c.jsx)(u.Z,{variant:"secondary",onClick:function(){return R({classId:"",studentId:"",startDate:"",endDate:""})},children:"Clear Filters"}),(0,c.jsx)(u.Z,{variant:"primary",onClick:S,loading:v,children:"Generate Report"}),C&&(0,c.jsx)(u.Z,{variant:"success",onClick:function(){console.log("Exporting report...")},children:"Export Report"})]})]}),(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,c.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:null===(e=_.find((function(e){return e.id===a})))||void 0===e?void 0:e.label})}),(0,c.jsx)("div",{className:"p-6",children:function(){switch(a){case"students":return function(){if(!C)return null;var e=[{key:"student.firstName",header:"First Name"},{key:"student.lastName",header:"Last Name"},{key:"student.studentId",header:"Student ID"},{key:"student.currentClass",header:"Class"},{key:"attendance.percentage",header:"Attendance %",render:function(e){return(0,c.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.attendance.percentage>=90?"bg-green-100 text-green-800":e.attendance.percentage>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[e.attendance.percentage,"%"]})}},{key:"academic.averageGrade",header:"Average Grade",render:function(e){return(0,c.jsx)("span",{className:"font-medium",children:e.academic.averageGrade.toFixed(2)})}},{key:"financial.outstanding",header:"Outstanding Fees",render:function(e){return(0,c.jsxs)("span",{className:"font-medium ".concat(e.financial.outstanding>0?"text-red-600":"text-green-600"),children:["$",e.financial.outstanding]})}}];return(0,c.jsx)(m.Z,{data:C,columns:e,loading:v,emptyMessage:"No student data found"})}();case"attendance":return function(){var e,t,a,r;if(!C)return null;var s=[{key:"date",header:"Date"},{key:"summary.totalDays",header:"Total Days"},{key:"summary.presentDays",header:"Present"},{key:"summary.absentDays",header:"Absent"},{key:"summary.attendanceRate",header:"Attendance Rate",render:function(e){return(0,c.jsxs)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(e.summary.attendanceRate>=90?"bg-green-100 text-green-800":e.summary.attendanceRate>=75?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[e.summary.attendanceRate,"%"]})}}];return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"mb-6 bg-white rounded-lg shadow p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Attendance Summary"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===(e=C.summary)||void 0===e?void 0:e.totalDays)||0}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Total Days"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null===(t=C.summary)||void 0===t?void 0:t.presentDays)||0}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Present Days"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-red-600",children:(null===(a=C.summary)||void 0===a?void 0:a.absentDays)||0}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Absent Days"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[(null===(r=C.summary)||void 0===r?void 0:r.attendanceRate)||0,"%"]}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Attendance Rate"})]})]})]}),(0,c.jsx)(m.Z,{data:C.details||[],columns:s,loading:v,emptyMessage:"No attendance data found"})]})}();case"academic":return function(){var e,t,a,r;return C?(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"mb-6 bg-white rounded-lg shadow p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Academic Summary"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null===(e=C.summary)||void 0===e?void 0:e.totalExams)||0}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Total Exams"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-green-600",children:(null===(t=C.summary)||void 0===t?void 0:t.averageGrade)||0}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Average Grade"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:(null===(a=C.summary)||void 0===a?void 0:a.highestGrade)||"-"}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Highest Grade"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsx)("p",{className:"text-2xl font-bold text-red-600",children:(null===(r=C.summary)||void 0===r?void 0:r.lowestGrade)||"-"}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Lowest Grade"})]})]})]}),(0,c.jsx)(m.Z,{data:C.results||[],columns:[{key:"examId",header:"Exam ID"},{key:"studentId",header:"Student ID"},{key:"obtainedMarks",header:"Obtained Marks"},{key:"grade",header:"Grade"},{key:"remarks",header:"Remarks"}],loading:v,emptyMessage:"No academic data found"})]}):null}();case"financial":return function(){var e,t,a,r;return C?(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"mb-6 bg-white rounded-lg shadow p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Financial Summary"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",(null===(e=C.summary)||void 0===e?void 0:e.totalFees)||0]}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Total Fees"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",(null===(t=C.summary)||void 0===t?void 0:t.collectedFees)||0]}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Collected Fees"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",(null===(a=C.summary)||void 0===a?void 0:a.outstandingFees)||0]}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Outstanding Fees"})]}),(0,c.jsxs)("div",{className:"text-center",children:[(0,c.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[(null===(r=C.summary)||void 0===r?void 0:r.collectionRate)||0,"%"]}),(0,c.jsx)("p",{className:"text-sm text-gray-600",children:"Collection Rate"})]})]})]}),(0,c.jsx)(m.Z,{data:C.payments||[],columns:[{key:"feeId",header:"Fee ID"},{key:"studentId",header:"Student ID"},{key:"amount",header:"Amount"},{key:"paymentDate",header:"Payment Date"},{key:"paymentMethod",header:"Payment Method"},{key:"receiptNumber",header:"Receipt Number"}],loading:v,emptyMessage:"No financial data found"})]}):null}();default:return null}}()})]})]})}},828:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(3375);var s=a(1566);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||(0,r.Z)(e,t)||(0,s.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}},function(e){e.O(0,[774,888,179],(function(){return t=2967,e(e.s=t);var t}));var t=e.O();_N_E=t}]);